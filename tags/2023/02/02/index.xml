<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>2023/02/02 on</title><link>https://ikorihn.github.io/digitalgarden/tags/2023/02/02/</link><description>Recent content in 2023/02/02 on</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://ikorihn.github.io/digitalgarden/tags/2023/02/02/index.xml" rel="self" type="application/rss+xml"/><item><title>Jenkins Kubernetes pluginでinheritFromを上書きしつつpod名にprefixをつける</title><link>https://ikorihn.github.io/digitalgarden/note/Jenkins-Kubernetes-plugin%E3%81%A7inheritFrom%E3%82%92%E4%B8%8A%E6%9B%B8%E3%81%8D%E3%81%97%E3%81%A4%E3%81%A4pod%E5%90%8D%E3%81%ABprefix%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B/</link><pubDate>Thu, 02 Feb 2023 19:21:00 +0900</pubDate><guid>https://ikorihn.github.io/digitalgarden/note/Jenkins-Kubernetes-plugin%E3%81%A7inheritFrom%E3%82%92%E4%B8%8A%E6%9B%B8%E3%81%8D%E3%81%97%E3%81%A4%E3%81%A4pod%E5%90%8D%E3%81%ABprefix%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B/</guid><description>configure cloudsの設定でpodTemplateを定義ずみで、 inheritFrom で継承しつつ一部だけを上書きしたいときの書き方
podTemplateの設定
name my-jenkins-agent labels my-jenkins-agent 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 pipeline { agent { kubernetes { inheritFrom &amp;#39;my-jenkins-agent&amp;#39; label &amp;#39;my-jenkins-agent&amp;#39; yamlMergeStrategy merge() yaml &amp;#39;&amp;#39;&amp;#39; apiVersion: v1 kind: Pod metadata: labels: some-label: some-label-value spec: containers: - name: maven image: maven:alpine command: - cat tty: true &amp;#39;&amp;#39;&amp;#39; } } stages { stage(&amp;#39;Run maven&amp;#39;) { steps { container(&amp;#39;maven&amp;#39;) { sh &amp;#39;mvn -version&amp;#39; } } } } } こうすると、設定済みのpodTemplateが使われて yaml に書いた定義は反映されない。 labelが完全一致していると上書きできないのかも？</description></item></channel></rss>